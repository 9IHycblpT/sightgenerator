Контакты
--------

По всем вопросам discord Leontij#8405

Установка и запуск
------------------

Скачайте и разархивируйте проект https://github.com/ShubbeLeontij/sightgenerator/archive/refs/heads/master.zip

Скачайте и установите python3 (если он не был установлен ранее) https://www.python.org/downloads/

В папке проекта необходимо запустить reader.py, создастся папка UserSights, содержащая прицелы

Настройки
---------

path.txt - файл, содержащий путь до папки с игрой (к примеру, C:\Games\War Thunder)
По умолчанию файл пустой - в таком случае папка UserSights, содержащая прицелы будет создаваться в папке проекта

start.txt и rangefinder.txt - файлы, содержащие некоторые стандартные настройки прицела и различные варианты дальномера. 
Изменяйте эти файлы только если уверены в том, что делаете. 

data.xlsx - таблица, по которой строятся прицелы. Каждая строка является отдельным прицелом. Для удобства данные разделены на страницы.
Столбцы слева направо: название танка, сведение в метрах, начальная скорость снаряда в м/с, зум прицела наводчика без приближения, тип прицела, далее идут данные из AssetViewer, связанные с расположением прицела относительно ствола

settings.json - основной файл с настройками

Общие настройки:

crosshairColor и crosshairLightColor - два цвета прицела в формате красный, зелёный, синий, непрозрачность

rangefinderProgressBarColor1 и rangefinderProgressBarColor2 - цвета (в том же формате) полоски, появляющейся при замере дистанции

drawCentralLineVert и drawCentralLineHorz - рисовать ли вертикальную и горизонтальную полосы. "yes" или "no"

lineSizeMult - толщина линий

fontSizeMult - размер подписей. Итоговое значение будет зависеть от этого параметра и зума. 

minFontSize - минимальное значение fontSizeMult. Необходимо для того, чтобы у танков с большим зумом не исчезали линии. 

badZoomThreshold - порог зума для выбора типа дальномера

distLength - длина меток, которые строятся игрой

Типы прицелов:

names - список имён этого типа прицелов. Эти имена используются в data.xlsx

rangefinder - будет ли у этого прицела дальномер (0 или 1)

right_dist_list и left_dist_list - списки дистанций игровых меток с одной и другой стороны соответственно, которые будут с подписью

small_dist_list - список дистанций игровых меток без подписи. Также длина метки в полтора раза меньше. Находиться метки будут с той же стороны, что и left_dist_list

circles - кружочки на прицеле в следующем формате: "дистанция": {"size":  размер круга, "textPos": [смещение подписи относительно круга по горизонтали и вертикали соответственно], "textSize": размер подписи}
Важно понимать, что круги не учитывают торможение снаряда, а игровые метки не учитывают параллакс, поэтому на небольших дистанциях рекомендуется использование кругов, а на больших - игровых меток. 

line_dist_list - список дистанций, по которым строится линия. Для большей плавности линии можно добавить больше дистанций. 

centralLines - текст, который попадёт в блок drawLines в .blk файле. Рисует линии перекрестья в центре. 

centralCircle - текст, который попадёт в блок drawCircles в .blk файле. Рисует круг перекрестья в центре. 

Пример использования №1
-----------------------
Допустим, захотелось иметь прицелы без дальномера и с подписями с двух сторон вместо маленьких штрихов.

Открываем settings.json в любом текстовом редакторе, находим "names": ["sim_AP", "sim_HEAT", "sim_HE"] , меняем строчкой ниже 1 на 0. Это уберёт дальномер. 
Вырезаем 1000, 1400, 1800, 2200, 2600, 3000 из строчки small_dist_list и вставляем в right_dist_list. Это изменит подписи. 
Не забываем сохранить файл, запускаем reader.py, в появившимся окне убеждаемся, что все прицелы создались (в случае какой-то ошибки вместо Successfully created sight... будет написано Wrong string format). 
Переносим созданные файлы в папку с игрой и проверяем уже в игре (для того чтобы игра обновила прицелы, нажмите alt+f9)

Пример использования №2
-----------------------
Допустим, захотелось иметь прицелы без центрального перекрестья, но со сплошной горизонтальной линией.

Открываем settings.json в любом текстовом редакторе, находим drawCentralLineHorz , меняем no на yes. Это нарисует горизонтальную линию. 
В каждой строке, содержащей centralLines меняем всё после двоеточия на "". Это уберёт центральные линии. 
Не забываем сохранить файл, запускаем reader.py, в появившимся окне убеждаемся, что все прицелы создались (в случае какой-то ошибки вместо Successfully created sight... будет написано Wrong string format). 
Переносим созданные файлы в папку с игрой и проверяем уже в игре (для того чтобы игра обновила прицелы, нажмите alt+f9)

Пример использования №3
-----------------------
Допустим, захотелось иметь циановые прицелы, при подсветке, становящиеся чёрными.

Открываем settings.json в любом текстовом редакторе, находим crosshairColor, меняем на "0, 255, 255, 255" , crosshairLightColor меняем на "0, 0, 0, 255". 
Не забываем сохранить файл, запускаем reader.py, в появившимся окне убеждаемся, что все прицелы создались (в случае какой-то ошибки вместо Successfully created sight... будет написано Wrong string format). 
Переносим созданные файлы в папку с игрой и проверяем уже в игре (для того чтобы игра обновила прицелы, нажмите alt+f9)